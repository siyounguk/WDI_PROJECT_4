<html ng-app="walks">
<head>
  <title>Walks App</title>
  <!-- External JS Resources -->
  <script src="js/lib/lodash.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.2/angular.min.js"></script>
  <script src="https://cdn.rawgit.com/auth0/angular-jwt/master/dist/angular-jwt.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-resource.min.js"></script>
  <!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular-google-maps/2.2.1/angular-google-maps.min.js"></script> -->


  <!-- Internal JS Resources -->

  <script type="text/javascript" src="js/lib/angular-simple-logger.min.js"></script>
  <script type="text/javascript" src="https://rawgit.com/angular-ui/angular-google-maps/2.2.1/dist/angular-google-maps.min.js"></script>

  <script src="./js/app.js"></script>


  <script type="text/javascript" src="./js/models/user.js"></script>
  <script type="text/javascript" src="./js/models/walk.js"></script>
  <script type="text/javascript" src="./js/controllers/userController.js"></script>
  <script type="text/javascript" src="./js/controllers/walkController.js"></script>
  <script type="text/javascript" src="./js/services/tokenService.js"></script>
  <script type="text/javascript" src="./js/services/authInterceptor.js"></script>

  <!-- Style -->
  <link rel="stylesheet" type="text/css" href="./css/style.css">
</head>
<body ng-controller="userController as users" >
    <header>
      <h1>Users</h1>
      <h2>Access the user database.</h2>
      <nav>
        <ul>
  <!--         <li><a href="#login">Log In</a></li>
          <li><a href="#register">Join</a></li> -->
          <li ng-hide= "users.isLoggedIn() == false"><a href="#" ng-click="users.getUsers()">get users</a></li>
          <li ng-hide= "users.isLoggedIn() == false"><a href="#" ng-click="users.disappear()">Log Out</a></li>
        </ul>
      </nav>
    </header>


    <div class="message">
      {{users.message}}
    </div>

  <section ng-hide= "users.isLoggedIn() == false">
    <p>Here is the list of our current users:</p>
    <ul >
      <li ng-repeat="user in users.all">
        
        <strong>{{user.email}}</strong> 
      </li>
    </ul>
  </section>



  <p>Here is the list of our current walks:</p>



  <div ng-controller="walkController as walks">
  <div id="floating-panel">
    <button ng-click="walks.calculateAndDisplayRoute()" >show start / end</button>
    <form id="start-end-form" ng-submit="walks.addRoute()">
      <input id="start" class="controls" type="text"
         placeholder="Start Point">
      <input id="end" class="controls" type="text"
         placeholder="End Point">
      
      <input id="description" class="controls" type="text" placeholder="description" ng-model="walks.route.description">
      <input id="photo" class="controls" type="text" placeholder="photo URL" ng-model="walks.route.photo">
      <input id="pac-input" class="controls" type="text"
         placeholder="Enter a location">
      <button>add stop</button>
      <input type="submit" id="submit" value="set route">
      <br>
      
    </form>
  </div>
  
  <div id="main-map" style="width:500px;height:500px;"></div>




    <ul >
      <li ng-repeat="walk in walks.all">
        Start: {{walk.origin.name}} 
        <ul>
          <li ng-repeat= "stop in walk.stops">{{stop.name}}</li>
        </ul>

        End: {{walk.destination.name}}
        <br>
        <strong>Description: {{walk.description}}</strong> 

        {{walk.users}}
      </li>
    </ul>
  </div>

  <section ng-hide= "users.isLoggedIn() == true">
    <h3>Login</h3>
    <form id="login" ng-submit="users.login()">


      <label for="email">email</label>
      <input type="text" name="email" placeholder="What is your email?" ng-model="users.user.email">

      <label for="password">Password</label>
      <input type="password" name="password" placeholder="What is your password?" ng-model="users.user.password">

      <input type="submit" value="Access">
    </form>
  </section>
  <section ng-hide= "users.isLoggedIn() == true">
    <h3>Join</h3>
    <form id="register" ng-submit="users.register()">

      <label for="email">Email</label>
      <input type="text" name="email" placeholder="What is your email?" ng-model="users.user.email">

      <label for="password">Password</label>
      <input type="password" name="password" placeholder="Password" >

      <input type="submit" value="Access">
    </form>
  </section>



  
</body>
</html>